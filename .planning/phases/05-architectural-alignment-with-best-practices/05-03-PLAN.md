---
phase: 05-architectural-alignment
plan: 03
type: execute
wave: 2
depends_on: ["05-01"]
files_modified:
  - app/org/[orgId]/page.tsx
  - app/org/[orgId]/performance/page.tsx
  - app/org/[orgId]/design/page.tsx
  - app/org/[orgId]/skillgraph/page.tsx
  - app/org/[orgId]/spof/page.tsx
  - components/dashboard/pages/OrgOverviewPageClient.tsx
  - components/dashboard/pages/OrgPerformancePageClient.tsx
  - components/dashboard/pages/OrgDesignPageClient.tsx
  - components/dashboard/pages/OrgSkillGraphPageClient.tsx
  - components/dashboard/pages/OrgSpofPageClient.tsx
autonomous: true

must_haves:
  truths:
    - "Org page files are thin Server Component wrappers that render a single Client Component"
    - "All business logic (useState, useMemo, useCallback, data processing) lives in Client Components"
    - "All 5 org dashboard tabs render identically to before the refactor"
    - "Tab navigation between org dashboard tabs works correctly"
    - "Consistent architecture across all 10 dashboard pages (org + team)"
  artifacts:
    - path: "components/dashboard/pages/OrgOverviewPageClient.tsx"
      provides: "Client component for org overview tab"
      contains: "use client"
    - path: "components/dashboard/pages/OrgPerformancePageClient.tsx"
      provides: "Client component for org performance tab"
      contains: "use client"
    - path: "components/dashboard/pages/OrgDesignPageClient.tsx"
      provides: "Client component for org design tab"
      contains: "use client"
    - path: "components/dashboard/pages/OrgSkillGraphPageClient.tsx"
      provides: "Client component for org skillgraph tab"
      contains: "use client"
    - path: "components/dashboard/pages/OrgSpofPageClient.tsx"
      provides: "Client component for org SPOF tab"
      contains: "use client"
    - path: "app/org/[orgId]/page.tsx"
      provides: "Server Component wrapper for org overview"
      contains: "OrgOverviewPageClient"
    - path: "app/org/[orgId]/performance/page.tsx"
      provides: "Server Component wrapper for org performance"
      contains: "OrgPerformancePageClient"
    - path: "app/org/[orgId]/design/page.tsx"
      provides: "Server Component wrapper for org design"
      contains: "OrgDesignPageClient"
    - path: "app/org/[orgId]/skillgraph/page.tsx"
      provides: "Server Component wrapper for org skillgraph"
      contains: "OrgSkillGraphPageClient"
    - path: "app/org/[orgId]/spof/page.tsx"
      provides: "Server Component wrapper for org SPOF"
      contains: "OrgSpofPageClient"
  key_links:
    - from: "app/org/[orgId]/page.tsx"
      to: "components/dashboard/pages/OrgOverviewPageClient.tsx"
      via: "import and render"
      pattern: "OrgOverviewPageClient"
---

<objective>
Extract all 5 org dashboard pages into the Server Component wrapper + Client Component pattern, completing the architectural alignment across all dashboard pages.

Purpose: Org pages don't use `useParams()` (they don't need route params) but they still violate the Server/Client separation principle by having `"use client"` and all business logic in page files. This migration creates consistent architecture across all 10 dashboard pages.

Output: 5 thin Server Component page wrappers and 5 Client Component files in `components/dashboard/pages/`.
</objective>

<execution_context>
@/Users/kartikmistry/.claude/get-shit-done/workflows/execute-plan.md
@/Users/kartikmistry/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-architectural-alignment-with-best-practices/05-RESEARCH.md
@.planning/phases/05-architectural-alignment-with-best-practices/05-01-SUMMARY.md

@app/org/[orgId]/page.tsx
@app/org/[orgId]/performance/page.tsx
@app/org/[orgId]/design/page.tsx
@app/org/[orgId]/skillgraph/page.tsx
@app/org/[orgId]/spof/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extract OrgOverview and OrgPerformance Client Components</name>
  <files>
    app/org/[orgId]/page.tsx,
    components/dashboard/pages/OrgOverviewPageClient.tsx,
    app/org/[orgId]/performance/page.tsx,
    components/dashboard/pages/OrgPerformancePageClient.tsx
  </files>
  <action>
Note: The `components/dashboard/pages/` directory may already exist from Plan 05-02 (if it ran first) or may need to be created (if this plan runs first). Check and create if needed.

For org pages, the extraction is simpler because they don't use `useParams()`. The only change is moving business logic out of the page file.

**A. Org Overview (`page.tsx` -> `OrgOverviewPageClient.tsx`)**

1. Create `components/dashboard/pages/OrgOverviewPageClient.tsx`:
   - `"use client";` directive
   - Copy ALL content from current `app/org/[orgId]/page.tsx` (all imports, the function body, JSX)
   - Rename: `export function OrgOverviewPageClient()`
   - No param changes needed (org overview doesn't use route params)

2. Replace `app/org/[orgId]/page.tsx`:
```tsx
import { OrgOverviewPageClient } from '@/components/dashboard/pages/OrgOverviewPageClient';

export default function OrgOverviewPage() {
  return <OrgOverviewPageClient />;
}
```

**B. Org Performance (`page.tsx` -> `OrgPerformancePageClient.tsx`)**

1. Create `components/dashboard/pages/OrgPerformancePageClient.tsx`:
   - `"use client";` directive
   - Copy ALL content from current `app/org/[orgId]/performance/page.tsx` (including the `DEFAULT_PERFORMANCE_GAUGE_VALUE` constant)
   - Rename: `export function OrgPerformancePageClient()`
   - No param changes needed

2. Replace `app/org/[orgId]/performance/page.tsx`:
```tsx
import { OrgPerformancePageClient } from '@/components/dashboard/pages/OrgPerformancePageClient';

export default function OrgPerformancePage() {
  return <OrgPerformancePageClient />;
}
```

Important: Do NOT change any business logic, styling, imports, or component usage in the client components. The ONLY changes are:
- Moving code to new file location
- Changing export name from `default` to named export
- Removing `"use client"` from page file
  </action>
  <verify>
1. Run `npx tsc --noEmit` - zero TypeScript errors
2. Verify both page files no longer contain `"use client"`
3. Verify both Client Component files exist and contain `"use client"`
4. Run `npm run build` to confirm build succeeds
  </verify>
  <done>
Org Overview and Performance pages are thin Server Component wrappers. Business logic lives in `OrgOverviewPageClient.tsx` and `OrgPerformancePageClient.tsx`. Build passes.
  </done>
</task>

<task type="auto">
  <name>Task 2: Extract OrgDesign, OrgSkillGraph, and OrgSpof Client Components</name>
  <files>
    app/org/[orgId]/design/page.tsx,
    components/dashboard/pages/OrgDesignPageClient.tsx,
    app/org/[orgId]/skillgraph/page.tsx,
    components/dashboard/pages/OrgSkillGraphPageClient.tsx,
    app/org/[orgId]/spof/page.tsx,
    components/dashboard/pages/OrgSpofPageClient.tsx
  </files>
  <action>
Apply the same extraction pattern to the remaining 3 org pages:

**A. Org Design (`page.tsx` -> `OrgDesignPageClient.tsx`)**

1. Create `components/dashboard/pages/OrgDesignPageClient.tsx`:
   - `"use client";` directive
   - Copy ALL content from current design `page.tsx`
   - Rename: `export function OrgDesignPageClient()`

2. Replace `app/org/[orgId]/design/page.tsx`:
```tsx
import { OrgDesignPageClient } from '@/components/dashboard/pages/OrgDesignPageClient';

export default function OrgDesignPage() {
  return <OrgDesignPageClient />;
}
```

**B. Org SkillGraph (`page.tsx` -> `OrgSkillGraphPageClient.tsx`)**

1. Create `components/dashboard/pages/OrgSkillGraphPageClient.tsx`:
   - `"use client";` directive
   - Copy ALL content from current skillgraph `page.tsx` (including `buildSkillRowsFromRoadmap` helper function)
   - Rename: `export function OrgSkillGraphPageClient()`

2. Replace `app/org/[orgId]/skillgraph/page.tsx`:
```tsx
import { OrgSkillGraphPageClient } from '@/components/dashboard/pages/OrgSkillGraphPageClient';

export default function OrgSkillGraphPage() {
  return <OrgSkillGraphPageClient />;
}
```

**C. Org SPOF (`page.tsx` -> `OrgSpofPageClient.tsx`)**

1. Create `components/dashboard/pages/OrgSpofPageClient.tsx`:
   - `"use client";` directive
   - Copy ALL content from current spof `page.tsx` (including `DEFAULT_SPOF_GAUGE_VALUE` constant)
   - Rename: `export function OrgSpofPageClient()`

2. Replace `app/org/[orgId]/spof/page.tsx`:
```tsx
import { OrgSpofPageClient } from '@/components/dashboard/pages/OrgSpofPageClient';

export default function OrgSpofPage() {
  return <OrgSpofPageClient />;
}
```

Important: For ALL three pages:
- Do NOT change any business logic, JSX, styling, or component usage
- Only changes: file location, function name (default -> named), `"use client"` moves to client file
- Include ALL helper functions and constants defined in the original page files
  </action>
  <verify>
1. Run `npx tsc --noEmit` - zero TypeScript errors
2. Run `npm run build` - build succeeds
3. Verify NO file under `app/org/[orgId]/` (direct children, not team subfolder) contains `"use client"` (grep check)
4. Verify all 5 org Client Component files exist in `components/dashboard/pages/`
5. Verify all Client Component files contain `"use client"` directive
6. Verify total of 10 `*PageClient.tsx` files exist in `components/dashboard/pages/` (5 team + 5 org)
  </verify>
  <done>
All 5 org dashboard pages are thin Server Component wrappers. All business logic lives in the corresponding `*PageClient.tsx` files. Combined with Plan 05-02, all 10 dashboard pages now follow the Server/Client separation pattern. Build passes with no errors.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes
2. `npm run build` succeeds
3. `grep -r '"use client"' app/org/\[orgId\]/page.tsx app/org/\[orgId\]/performance/ app/org/\[orgId\]/design/ app/org/\[orgId\]/skillgraph/ app/org/\[orgId\]/spof/` returns zero matches (excluding team subfolder which is handled by Plan 05-02)
4. `ls components/dashboard/pages/Org*` shows 5 files
5. All 5 Client Component files have `"use client"` directive
6. Total: 10 `*PageClient.tsx` files in `components/dashboard/pages/` directory
</verification>

<success_criteria>
- 5 thin Server Component page wrappers exist for org pages (no `"use client"`, no business logic)
- 5 Client Component files exist in `components/dashboard/pages/` for org pages
- All org tabs render identically to before the refactor
- Consistent architecture: all 10 dashboard pages follow Server/Client separation
- App builds and all org tabs work correctly
</success_criteria>

<output>
After completion, create `.planning/phases/05-architectural-alignment-with-best-practices/05-03-SUMMARY.md`
</output>
