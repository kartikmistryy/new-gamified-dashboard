---
phase: 01-foundation-type-system
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - app/org/[orgId]/team/[teamId]/page.tsx
  - app/org/[orgId]/team/[teamId]/performance/page.tsx
  - app/org/[orgId]/team/[teamId]/design/page.tsx
  - app/org/[orgId]/team/[teamId]/skillgraph/page.tsx
  - app/org/[orgId]/team/[teamId]/spof/page.tsx
  - components/dashboard/MemberTable.tsx
autonomous: false

must_haves:
  truths:
    - "Navigating to /org/gitroll/team/frontend renders a team overview page with member table showing 6 members"
    - "MemberTable shows rank, name (with avatar), effective performance (with label, value, trend icon), and status (type distribution segment bar)"
    - "Tab navigation on team page shows 5 tabs (Overview, Performance, Design, Skills Graph, SPOF) with correct team-scoped URLs like /org/gitroll/team/frontend/performance"
    - "Clicking each tab navigates to the corresponding team sub-page without errors"
    - "Breadcrumbs show Org > Team hierarchy (e.g., GitRoll > team > frontend) on all team pages, powered by existing useDashboardMeta hook"
    - "Clicking a team in the sidebar navigates to /org/:orgId/team/:teamId, powered by existing SidebarContentSections using getTeamPath"
  artifacts:
    - path: "app/org/[orgId]/team/[teamId]/page.tsx"
      provides: "Team overview page with MemberTable"
      contains: "MemberTable"
    - path: "components/dashboard/MemberTable.tsx"
      provides: "Member table component wrapping BaseTeamsTable"
      exports: ["MemberTable"]
    - path: "app/org/[orgId]/team/[teamId]/performance/page.tsx"
      provides: "Performance tab placeholder"
    - path: "app/org/[orgId]/team/[teamId]/design/page.tsx"
      provides: "Design tab placeholder"
    - path: "app/org/[orgId]/team/[teamId]/skillgraph/page.tsx"
      provides: "Skills Graph tab placeholder"
    - path: "app/org/[orgId]/team/[teamId]/spof/page.tsx"
      provides: "SPOF tab placeholder"
  key_links:
    - from: "app/org/[orgId]/team/[teamId]/page.tsx"
      to: "components/dashboard/MemberTable.tsx"
      via: "imports and renders MemberTable with mock data"
      pattern: "import.*MemberTable"
    - from: "components/dashboard/MemberTable.tsx"
      to: "components/dashboard/BaseTeamsTable.tsx"
      via: "wraps BaseTeamsTable with MemberPerformanceRow generic"
      pattern: "BaseTeamsTable<MemberPerformanceRow"
    - from: "app/org/[orgId]/team/[teamId]/page.tsx"
      to: "lib/teamDashboard/overviewMockData.ts"
      via: "imports getMemberPerformanceRowsForTeam"
      pattern: "import.*getMemberPerformanceRowsForTeam"
    - from: "components/dashboard/layout/helpers/dashboardTabHelpers.ts"
      to: "app/org/[orgId]/team/[teamId]/*/page.tsx"
      via: "buildTabConfigs detects dashboardType=team, extracts teamId, generates /org/:orgId/team/:teamId/:tab URLs"
      pattern: "dashboardType.*team.*teamId"
    - from: "components/dashboard/layout/SidebarContentSections.tsx"
      to: "app/org/[orgId]/team/[teamId]/page.tsx"
      via: "Teams section renders SidebarListItem with href=getTeamPath(orgId, team.id), clicking navigates to team dashboard"
      pattern: "getTeamPath\\(orgId.*team\\.id\\)"
    - from: "components/dashboard/layout/hooks/useDashboardMeta.ts"
      to: "components/dashboard/layout/DashboardHeader.tsx"
      via: "useDashboardMeta builds breadcrumbItems for dashboardKey=team with [orgId > team > teamId] hierarchy, DashboardHeader renders them"
      pattern: "dashboardKey.*team.*teamId"
---

<objective>
Create the MemberTable component and team dashboard pages so that navigating to `/org/:orgId/team/:teamId` shows member data in a functioning tabbed dashboard.

Purpose: This plan wires the types and mock data from Plan 01 into visible UI -- the team overview page with a MemberTable, plus placeholder pages for the remaining 4 tabs so tab navigation works end-to-end.

Output: A MemberTable component reusing BaseTeamsTable, a working team overview page, and 4 placeholder tab pages. Users can navigate to any team, see members, and switch between all 5 tabs.

Existing infrastructure (no new code needed):
- **Sidebar team selector:** Already implemented in `SidebarContentSections.tsx` -- teams are listed under "Teams" section with `href={getTeamPath(orgId, team.id)}`, producing `/org/:orgId/team/:teamId`. Clicking a team navigates to its dashboard. Per user decision: "Navigation method: Click team in sidebar -- always visible team selector."
- **Breadcrumbs:** Already implemented in `useDashboardMeta.ts` -- when `dashboardKey === "team"`, breadcrumbs produce `[orgId] > team > [teamId]` with clickable links. `DashboardHeader.tsx` renders these. Per user decision: "Breadcrumbs: Full breadcrumb (Org Name > Team Name) showing hierarchy with click-to-navigate."
- **Tab URL generation:** Already implemented in `dashboardTabHelpers.ts` -- `buildTabConfigs` checks `dashboardType === "team" && teamId` and generates `/org/:orgId/team/:teamId/:tab` URLs. `TEAM_DASHBOARD_TABS` in `constants.ts` defines all 5 tabs.
</objective>

<execution_context>
@/Users/kartikmistry/.claude/get-shit-done/workflows/execute-plan.md
@/Users/kartikmistry/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-type-system/01-CONTEXT.md
@.planning/phases/01-foundation-type-system/01-01-SUMMARY.md

Key existing files to reference:
@components/dashboard/TeamTable.tsx — pattern to follow for MemberTable (wraps BaseTeamsTable with specific columns)
@components/dashboard/BaseTeamsTable.tsx — generic table component to reuse
@components/dashboard/layout/helpers/dashboardTabHelpers.ts — tab URL generation (already handles team routes via buildTabConfigs with dashboardType=team branch)
@components/dashboard/tabs/constants.ts — TEAM_DASHBOARD_TABS already defined with 5 tabs
@components/dashboard/layout/SidebarContentSections.tsx — sidebar already lists teams with getTeamPath hrefs (user decision: "Click team in sidebar")
@components/dashboard/layout/hooks/useDashboardMeta.ts — breadcrumbs already handle team routes producing [orgId > team > teamId] hierarchy (user decision: "Full breadcrumb")
@components/dashboard/layout/DashboardHeader.tsx — renders breadcrumbItems from useDashboardMeta
@lib/teamDashboard/types.ts — MemberPerformanceRow, MemberTableFilter (from Plan 01)
@lib/teamDashboard/overviewMockData.ts — getMemberPerformanceRowsForTeam (from Plan 01)
@components/shared/TeamAvatar.tsx — avatar component for member display
@lib/orgDashboard/colors.ts — DASHBOARD_COLORS, DASHBOARD_TEXT_CLASSES
@lib/orgDashboard/tableUtils.ts — hexToRgba
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create MemberTable component and team overview page</name>
  <files>
    components/dashboard/MemberTable.tsx
    app/org/[orgId]/team/[teamId]/page.tsx
  </files>
  <action>
**1. Create `components/dashboard/MemberTable.tsx`:**

Follow the exact pattern of `components/dashboard/TeamTable.tsx` but adapted for member data.

```typescript
"use client";
```

Import from existing codebase:
- `BaseTeamsTable`, `BaseTeamsTableColumn` from `./BaseTeamsTable`
- `SegmentBar` from `./SegmentBar`
- `TeamAvatar` from `../shared/TeamAvatar` (for member avatars -- it works with any name/seed)
- `MemberPerformanceRow`, `MemberTableFilter` from `@/lib/teamDashboard/types`
- `DASHBOARD_COLORS`, `DASHBOARD_TEXT_CLASSES` from `@/lib/orgDashboard/colors`
- `hexToRgba` from `@/lib/orgDashboard/tableUtils`
- `ArrowRight`, `TrendingUp`, `TrendingDown` from `lucide-react`
- Icon imports for type distribution segments: `Star`, `Bomb`, `Puzzle`, `FlaskConical`, `BrickWall`, `AlertTriangle` from `lucide-react`

Define filter tabs (same labels as TeamTable for consistency):
```typescript
const MEMBER_FILTER_TABS: { key: MemberTableFilter; label: string }[] = [
  { key: "mostProductive", label: "Most Productive" },
  { key: "leastProductive", label: "Least Productive" },
  { key: "mostOptimal", label: "Most Optimal" },
  { key: "mostRisky", label: "Most Risky" },
];
```

Define TYPE_DISTRIBUTION_SEGMENTS -- copy exactly from TeamTable.tsx (same segments for visual consistency).

Define `memberSortFunction` -- same logic as `teamSortFunction` in TeamTable.tsx but typed for `MemberPerformanceRow`:
- mostProductive: sort by performanceValue descending
- leastProductive: sort by performanceValue ascending
- mostOptimal: sort by performanceValue descending (same as mostProductive)
- mostRisky: sort by (timeBomb + risky) descending

Define MEMBER_COLUMNS (4 columns matching TeamTable pattern):
1. **rank** -- display index+1, bold for top 3 (same as TeamTable)
2. **member** -- show TeamAvatar (using memberName as seed) + memberName. Use `<TeamAvatar teamName={row.memberName} className="size-4" />` and `<p className="font-medium text-gray-900">{row.memberName}</p>`
3. **performance** -- "Effective Performance" column, right-aligned, showing performance label badge with value and trend icon (copy exact JSX from TeamTable's performance column, just use `row.memberName` doesn't affect this column -- it reads from same fields)
4. **status** -- "Developer Type" header, right-aligned, showing SegmentBar with type distribution (copy exact JSX from TeamTable)

Export the component:
```typescript
type MemberTableProps = {
  rows: MemberPerformanceRow[];
  activeFilter?: MemberTableFilter;
  onFilterChange?: (filter: MemberTableFilter) => void;
};

export function MemberTable({ rows, activeFilter = "mostProductive", onFilterChange }: MemberTableProps) {
  return (
    <BaseTeamsTable<MemberPerformanceRow, MemberTableFilter>
      rows={rows}
      filterTabs={MEMBER_FILTER_TABS}
      activeFilter={activeFilter}
      onFilterChange={onFilterChange}
      defaultFilter="mostProductive"
      sortFunction={memberSortFunction}
      columns={MEMBER_COLUMNS}
      getRowKey={(row) => row.memberName}
    />
  );
}
```

**2. Update `app/org/[orgId]/team/[teamId]/page.tsx`:**

Replace the stub with a working team overview page. Follow the pattern from `app/org/[orgId]/page.tsx` (org overview) but adapted for member data.

```typescript
"use client";

import { useMemo } from "react";
import { useParams } from "next/navigation";
import { Card, CardContent } from "@/components/ui/card";
import { getMemberPerformanceRowsForTeam } from "@/lib/teamDashboard/overviewMockData";
import { MemberTable } from "@/components/dashboard/MemberTable";
```

The component should:
- Use `useParams()` to get `teamId` (client component pattern -- the existing page is a client component stub)
- Use `useMemo` to generate member rows: `getMemberPerformanceRowsForTeam(52, teamId as string, 6)` -- use the default gauge value of 52 (matching existing DEFAULT_GAUGE in overviewMockData.ts)
- Render a layout matching org overview structure:
  - Outer div with `className="flex flex-col gap-8 px-6 pb-8 min-h-screen bg-white text-gray-900"`
  - Card wrapper with `className="w-full border-none bg-white p-0 shadow-none"`
  - CardContent with `className="flex w-full flex-col items-stretch space-y-8 px-0"`
  - H2 heading: "Team Members" with `className="text-2xl font-semibold text-foreground"`
  - MemberTable with the generated rows

NOTE: Do NOT add D3Gauge, ChartInsights, or OverviewSummaryCards to this page yet -- that's Phase 2 (Overview Tab). Phase 1 only needs the MemberTable to validate the foundation works.
  </action>
  <verify>
Run `npx tsc --noEmit` and confirm no TypeScript errors.
Run `npm run build` and confirm the build succeeds.
  </verify>
  <done>
MemberTable component exists at components/dashboard/MemberTable.tsx wrapping BaseTeamsTable with member columns (rank, member name+avatar, effective performance, developer type). Team overview page at app/org/[orgId]/team/[teamId]/page.tsx renders MemberTable with 6 mock member rows. Both files compile without errors.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create tab placeholder pages and verify existing infrastructure</name>
  <files>
    app/org/[orgId]/team/[teamId]/performance/page.tsx
    app/org/[orgId]/team/[teamId]/design/page.tsx
    app/org/[orgId]/team/[teamId]/skillgraph/page.tsx
    app/org/[orgId]/team/[teamId]/spof/page.tsx
  </files>
  <action>
**1. Create 4 placeholder pages:**

Create 4 placeholder pages for the remaining team dashboard tabs. Each page follows the same minimal pattern so tab navigation works without 404 errors.

For each of the 4 files, create a page component that:
- Exports a default function component named descriptively (e.g., `TeamPerformancePage`, `TeamDesignPage`, `TeamSkillgraphPage`, `TeamSpofPage`)
- Renders a simple placeholder with consistent styling:

```typescript
export default function TeamPerformancePage() {
  return (
    <div className="flex flex-col gap-8 px-6 pb-8 min-h-screen bg-white text-gray-900">
      <h2 className="text-2xl font-semibold text-foreground">
        Performance
      </h2>
      <p className="text-muted-foreground">
        Team member performance tracking coming in Phase 3.
      </p>
    </div>
  );
}
```

Pages to create:
1. `app/org/[orgId]/team/[teamId]/performance/page.tsx` -- TeamPerformancePage, title "Performance"
2. `app/org/[orgId]/team/[teamId]/design/page.tsx` -- TeamDesignPage, title "Design"
3. `app/org/[orgId]/team/[teamId]/skillgraph/page.tsx` -- TeamSkillgraphPage, title "Skills Graph"
4. `app/org/[orgId]/team/[teamId]/spof/page.tsx` -- TeamSpofPage, title "SPOF"

These are intentionally minimal -- they exist only so that DashboardTabs can navigate to them without 404 errors. Full implementation happens in Phases 2-4.

No "use client" directive needed for these static placeholder pages (they have no interactivity).

**2. Verify existing infrastructure handles team routes correctly:**

After creating the placeholder pages, verify the three existing features that serve team routes (no code changes needed -- these already work):

a) **Tab URL generation** -- Verify `dashboardTabHelpers.ts` produces correct team-scoped URLs by inspecting the `buildTabConfigs` function's team branch (lines 96-100): when `dashboardType === "team" && teamId`, it generates `/org/${orgId}/team/${teamId}/${tab.key}`. Confirm this by checking the build output or running the app.

b) **Sidebar team selector** -- Verify `SidebarContentSections.tsx` already renders team links with `href={getTeamPath(orgId, team.id)}` (line 112). Per user decision: "Click team in sidebar -- always visible team selector." This is already implemented -- clicking "Frontend" in the sidebar navigates to `/org/gitroll/team/frontend`.

c) **Breadcrumbs** -- Verify `useDashboardMeta.ts` already handles `dashboardKey === "team"` (lines 75-85) and produces breadcrumbs: `[orgId] > team > [teamId]` with each segment linking to its respective route. Per user decision: "Full breadcrumb (Org Name > Team Name) showing hierarchy with click-to-navigate."

If any of these three features do NOT work correctly with the new team pages (e.g., wrong URL pattern, missing route detection), fix the issue in the existing file. The most likely issue would be `detectDashboardType` in `lib/routes.ts` not matching the `/org/:orgId/team/:teamId` pattern -- but inspection shows it already does (line 50: `/^\/org\/[^/]+\/team\/[^/]+/`).
  </action>
  <verify>
Run `npx tsc --noEmit` and confirm no TypeScript errors.
Run `npm run build` and confirm all 5 team routes build successfully (the overview page from Task 1 + these 4 placeholder pages).

Then verify the three existing infrastructure features work with team routes:

1. **Tab URLs:** Start dev server (`npm run dev`), navigate to `http://localhost:3000/org/gitroll/team/frontend`, inspect the tab links in the DOM (via browser dev tools or curl). Confirm the Performance tab href is `/org/gitroll/team/frontend/performance` (NOT `/org/gitroll/performance`). All 5 tab hrefs must include the `/team/frontend/` segment.

2. **Sidebar navigation:** From the org dashboard at `/org/gitroll`, click "Frontend" in the sidebar Teams section. Confirm navigation goes to `/org/gitroll/team/frontend` and the team overview page renders.

3. **Breadcrumbs:** On the team overview page at `/org/gitroll/team/frontend`, verify the breadcrumb bar shows: `GitRoll > team > frontend`. Navigate to `/org/gitroll/team/frontend/performance` and verify breadcrumbs show: `GitRoll > team > frontend > Performance`.
  </verify>
  <done>
All 4 placeholder pages exist and compile. Tab URLs correctly scope to team routes (e.g., /org/gitroll/team/frontend/performance, not /org/gitroll/performance). Sidebar team selector navigates to /org/:orgId/team/:teamId. Breadcrumbs display Org > team > teamId hierarchy on all team pages.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete team dashboard foundation: MemberTable component with member data, team overview page showing 6 members, 4 tab placeholder pages, sidebar team navigation, breadcrumbs, and tab URL generation -- all working together.
  </what-built>
  <how-to-verify>
**Sidebar team selector (user decision: "Click team in sidebar -- always visible team selector"):**
1. Start the dev server: `npm run dev`
2. Navigate to http://localhost:3000/org/gitroll (org dashboard)
3. Verify: In the sidebar under "Teams", the team names (Frontend, Backend, Platform, etc.) are visible
4. Click "Frontend" in the sidebar -- should navigate to http://localhost:3000/org/gitroll/team/frontend
5. Verify: The "Frontend" team is highlighted/active in the sidebar

**Breadcrumbs (user decision: "Full breadcrumb (Org Name > Team Name) showing hierarchy with click-to-navigate"):**
6. On the team overview page (/org/gitroll/team/frontend), verify the breadcrumb bar at the top shows: `GitRoll > team > frontend`
7. Click the "GitRoll" breadcrumb -- should navigate back to /org/gitroll (org dashboard)
8. Navigate back to /org/gitroll/team/frontend, then click "Performance" tab
9. On /org/gitroll/team/frontend/performance, verify breadcrumbs show: `GitRoll > team > frontend > Performance`
10. Click "frontend" breadcrumb -- should navigate back to /org/gitroll/team/frontend

**MemberTable and overview page:**
11. On /org/gitroll/team/frontend, verify: Page shows "Team Members" heading with a table of 6 members
12. Verify: Each member row shows rank, name with avatar, effective performance (label + value + trend icon), and developer type distribution bar
13. Verify: Filter tabs (Most Productive, Least Productive, Most Optimal, Most Risky) appear above the table and switch sorting when clicked

**Tab navigation (user decision: "Identical 5 tabs as org dashboard"):**
14. Verify: Tab navigation bar shows 5 tabs (Overview, Performance, Design, Skills Graph, SPOF)
15. Verify: Tab URLs are team-scoped -- hover over "Performance" tab and confirm the URL is /org/gitroll/team/frontend/performance (NOT /org/gitroll/performance)
16. Click "Performance" tab -- should navigate to /org/gitroll/team/frontend/performance and show placeholder text
17. Click "Design" tab -- should navigate to /org/gitroll/team/frontend/design
18. Click "Skills Graph" tab -- should navigate to /org/gitroll/team/frontend/skillgraph
19. Click "SPOF" tab -- should navigate to /org/gitroll/team/frontend/spof
20. Click "Overview" tab -- should return to /org/gitroll/team/frontend with the member table
  </how-to-verify>
  <resume-signal>Type "approved" or describe any issues with the sidebar team selector, breadcrumbs, member table display, or tab navigation</resume-signal>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes with zero errors
2. `npm run build` succeeds
3. Team overview page at /org/gitroll/team/frontend renders MemberTable with 6 members
4. MemberTable shows rank, name+avatar, effective performance, developer type columns
5. Filter tabs sort member rows correctly
6. All 5 team dashboard tabs are navigable without 404 errors
7. Tab URLs are correctly team-scoped: /org/gitroll/team/frontend/performance (not /org/gitroll/performance)
8. Tab navigation highlights the active tab correctly
9. Clicking a team in the sidebar navigates to /org/:orgId/team/:teamId
10. Breadcrumbs show GitRoll > team > frontend hierarchy with clickable navigation
11. Breadcrumbs update correctly when navigating between team sub-tabs
</verification>

<success_criteria>
- MemberTable component wraps BaseTeamsTable with MemberPerformanceRow type and 4 columns
- Team overview page renders 6 member rows with realistic performance data
- All 5 tab routes exist and are navigable (/team/:teamId, /team/:teamId/performance, /design, /skillgraph, /spof)
- Tab URL generation correctly detects team dashboard context and builds /org/:orgId/team/:teamId/:tab URLs (verified by DOM inspection)
- Sidebar team selector navigates to team dashboard when clicked (per user decision: "Click team in sidebar")
- Breadcrumbs display Org > team > teamId hierarchy with click-to-navigate (per user decision: "Full breadcrumb")
- Build passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-type-system/01-02-SUMMARY.md`
</output>
